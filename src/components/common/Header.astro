---
const { pathname } = Astro.url;

const links = [
  { label: "Explore", href: "/explore", active: pathname === "/explore" },
  { label: "Pricing", href: "/pricing", active: pathname === "/pricing" },
  { label: "Docs", href: "/docs", active: pathname === "/docs" },
];
---

<!-- Command Deck Header -->
<nav
  class="fixed top-6 left-1/2 -translate-x-1/2 z-50 w-[90%] max-w-2xl bg-black/50 backdrop-blur-xl border border-white/10 rounded-full px-2 py-2 flex justify-between items-center shadow-[0_0_50px_rgba(0,0,0,0.5)] transition-all duration-300 hover:border-white/20"
>
  <!-- Logo / Home -->
  <a
    href="/"
    class="flex items-center gap-3 px-4 py-2 rounded-full hover:bg-white/5 transition-colors group"
  >
    <div class="relative w-2 h-2">
      <div
        class="absolute inset-0 bg-emerald-500 rounded-full animate-ping opacity-75"
      >
      </div>
      <div class="relative w-2 h-2 bg-emerald-500 rounded-full"></div>
    </div>
    <span
      class="font-mono text-[10px] font-bold tracking-widest uppercase text-white transition-colors"
    >
      VXLVERSE
    </span>
  </a>

  <!-- Navigation Links -->
  <div class="hidden md:flex items-center gap-1">
    {
      links.map((link) => (
        <a
          href={link.href}
          class={`relative px-4 py-2 rounded-full text-[10px] uppercase font-bold tracking-widest transition-all duration-300 group overflow-hidden ${
            link.active
              ? "text-black bg-white"
              : "text-zinc-400 hover:text-white hover:bg-white/5"
          }`}
        >
          <span class="relative z-10">{link.label}</span>
        </a>
      ))
    }
  </div>

  <!-- Action Button -->
  <a
    href="/editor"
    class="group relative px-6 py-2 bg-white text-black rounded-full overflow-hidden flex items-center gap-2 transition-transform hover:scale-105"
  >
    <span class="relative z-10 text-[10px] font-bold uppercase tracking-widest"
      >Create</span
    >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 20 20"
      fill="currentColor"
      class="w-3 h-3 relative z-10 transition-transform group-hover:translate-x-1"
    >
      <path
        fill-rule="evenodd"
        d="M3 10a.75.75 0 01.75-.75h10.638L10.23 5.29a.75.75 0 111.04-1.08l5.5 5.25a.75.75 0 010 1.08l-5.5 5.25a.75.75 0 11-1.04-1.08l4.158-3.96H3.75A.75.75 0 013 10z"
        clip-rule="evenodd"></path>
    </svg>
    <div
      class="absolute inset-0 bg-gradient-to-r from-zinc-200 to-white opacity-0 group-hover:opacity-100 transition-opacity"
    >
    </div>
  </a>

  <!-- Mobile Menu Button -->
  <button
    id="mobile-menu-btn"
    class="md:hidden px-4 text-white focus:outline-none"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="w-5 h-5"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path>
    </svg>
  </button>
</nav>

<!-- Mobile Overlay (unchanged logic, refined style) -->
<div
  id="mobile-menu"
  class="fixed inset-0 bg-[#050505]/95 backdrop-blur-3xl z-40 flex flex-col items-center justify-center gap-8 opacity-0 pointer-events-none transition-all duration-500 scale-95"
>
  <button
    id="close-menu-btn"
    class="absolute top-8 right-8 text-zinc-500 hover:text-white transition-colors"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="w-8 h-8"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M6 18 18 6M6 6l12 12"></path>
    </svg>
  </button>

  {
    links.map((link) => (
      <a
        href={link.href}
        class="text-3xl font-black uppercase tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-white to-zinc-500 hover:to-white transition-all transform hover:scale-110"
      >
        {link.label}
      </a>
    ))
  }
  <a
    href="/editor"
    class="mt-8 px-12 py-4 bg-white text-black font-bold uppercase tracking-widest rounded-full hover:scale-105 transition-transform"
    >Launch Engine</a
  >
</div>

<script>
  const menuBtn = document.getElementById("mobile-menu-btn");
  const closeBtn = document.getElementById("close-menu-btn");
  const menu = document.getElementById("mobile-menu");

  function toggleMenu() {
    if (menu) {
      const isClosed = menu.classList.contains("opacity-0");
      if (isClosed) {
        menu.classList.remove("opacity-0", "pointer-events-none", "scale-95");
        menu.classList.add("scale-100");
      } else {
        menu.classList.add("opacity-0", "pointer-events-none", "scale-95");
        menu.classList.remove("scale-100");
      }
    }
  }

  menuBtn?.addEventListener("click", toggleMenu);
  closeBtn?.addEventListener("click", toggleMenu);
</script>
