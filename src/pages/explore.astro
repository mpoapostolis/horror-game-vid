---
import Layout from "../layouts/Layout.astro";
import Header from "../components/common/Header.astro";
import "../styles/global.css";

const featuredGames = [
  {
    title: "Neon Citadel",
    genre: "RPG",
    author: "CyberK",
    players: "1.2k",
    image:
      "https://images.unsplash.com/photo-1614726365723-49cfae92782f?q=80&w=800&auto=format&fit=crop",
    desc: "A sprawling cyberpunk detective saga.",
  },
  {
    title: "The Void Walker",
    genre: "Adventure",
    author: "NullPt",
    players: "850",
    image:
      "https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=800&auto=format&fit=crop",
    desc: "Gravity-defying visual masterpieces.",
  },
  {
    title: "Forest of Echoes",
    genre: "Survival",
    author: "GreenThumb",
    players: "2.4k",
    image:
      "https://images.unsplash.com/photo-1511512578047-dfb367046420?q=80&w=800&auto=format&fit=crop",
    desc: "Procedural horror in an infinite wood.",
  },
  {
    title: "Steel Horizon",
    genre: "RTS",
    author: "MechMind",
    players: "5.1k",
    image:
      "https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=800&auto=format&fit=crop",
    desc: "Command legions in a rusted world.",
  },
  {
    title: "Dream Scape",
    genre: "Social",
    author: "Lucid",
    players: "12k",
    image:
      "https://images.unsplash.com/photo-1493246507139-91e8fad9978e?q=80&w=800&auto=format&fit=crop",
    desc: "Hang out in a vaporwave paradise.",
  },
  {
    title: "Grim Vault",
    genre: "Dungeon Crawler",
    author: "D20",
    players: "900",
    image:
      "https://images.unsplash.com/photo-1519074069444-1ba4fff66d16?q=80&w=800&auto=format&fit=crop",
    desc: "Old school hardcore dungeoneering.",
  },
];

const categories = [
  "All",
  "RPG",
  "FPS",
  "Survival",
  "Strategy",
  "Social",
  "Horror",
];
---

<Layout title="Explore | VXLVERSE">
  <Header />

  <div
    class="min-h-screen bg-[#020202] text-white pt-32 px-4 md:px-12 pb-20 relative overflow-hidden"
  >
    <!-- Background Effects -->
    <div class="fixed inset-0 pointer-events-none">
      <div
        class="absolute top-[-20%] right-[-10%] w-[60%] h-[60%] bg-purple-900/10 blur-[150px] rounded-full"
      >
      </div>
      <div
        class="absolute bottom-[-20%] left-[-10%] w-[60%] h-[60%] bg-cyan-900/10 blur-[150px] rounded-full"
      >
      </div>
      <div
        class="absolute inset-0 opacity-[0.03] bg-[url('/assets/noise.png')]"
      >
      </div>
    </div>

    <div class="max-w-7xl mx-auto relative z-10">
      <!-- Page Header -->
      <div class="mb-16">
        <div
          class="flex flex-col md:flex-row justify-between items-end gap-6 mb-8"
        >
          <div>
            <h1
              class="text-6xl md:text-8xl font-black uppercase tracking-tighter mb-4"
            >
              Explore <span
                class="text-transparent bg-clip-text bg-linear-to-r from-purple-500 to-cyan-500"
                >Universe</span>
            </h1>
            <p class="text-gray-400 text-lg max-w-xl">
              Discover thousands of worlds created by the VXLVERSE community.
              Play instantly in your browser.
            </p>
          </div>

          <!-- Search -->
          <div class="w-full md:w-auto relative group">
            <input
              type="text"
              placeholder="Search worlds..."
              class="w-full md:w-[300px] bg-white/5 border border-white/10 rounded-full px-6 py-3 text-sm focus:outline-none focus:border-purple-500 transition-colors text-white placeholder-gray-600"
            />
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-5 h-5 text-gray-500 absolute right-4 top-1/2 -translate-y-1/2 group-hover:text-white transition-colors"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
              ></path>
            </svg>
          </div>
        </div>

        <!-- Categories -->
        <div class="flex flex-wrap gap-2">
          {
            categories.map((cat, i) => (
              <button
                class={`px-6 py-2 rounded-full text-xs font-bold uppercase tracking-widest border transition-all ${i === 0 ? "bg-white text-black border-white" : "bg-transparent text-gray-500 border-white/10 hover:border-white hover:text-white"}`}
              >
                {cat}
              </button>
            ))
          }
        </div>
      </div>

      <!-- Grid -->
      <div
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
      >
        {
          featuredGames.map((game, i) => (
            <div
              class={`group relative aspect-3/4 bg-[#0a0a0a] border border-white/5 hover:border-purple-500/50 transition-all duration-300 rounded-sm overflow-hidden cursor-pointer tilt-card delay-${i * 100}`}
            >
              <div
                class="absolute inset-0 bg-cover bg-center opacity-60 group-hover:opacity-80 transition-opacity duration-500 group-hover:scale-105"
                style={`background-image: url('${game.image}')`}
              />
              <div class="absolute inset-0 bg-linear-to-t from-black via-black/50 to-transparent" />
              <div class="absolute bottom-0 left-0 p-6 w-full">
                <div class="flex items-center gap-2 mb-2">
                  <span class="px-2 py-0.5 bg-white/10 text-[8px] font-bold text-white uppercase rounded-sm backdrop-blur-md">
                    {game.genre}
                  </span>
                  <span class="text-[10px] text-gray-400 flex items-center gap-1">
                    <div class="w-1.5 h-1.5 rounded-full bg-green-500" />{" "}
                    {game.players}
                  </span>
                </div>
                <h3 class="text-xl font-bold text-white leading-tight mb-1 group-hover:text-purple-400 transition-colors">
                  {game.title}
                </h3>
                <p class="text-xs text-gray-400 mb-2">by {game.author}</p>
                <p class="text-xs text-gray-500 line-clamp-2">{game.desc}</p>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</Layout>

<script>
  // 3D Tilt Logic (Reused)
  const cards = document.querySelectorAll(".tilt-card");
  cards.forEach((card) => {
    card.addEventListener("mousemove", (e) => {
      // @ts-ignore
      const rect = card.getBoundingClientRect();
      // @ts-ignore
      const x = e.clientX - rect.left;
      // @ts-ignore
      const y = e.clientY - rect.top;
      const centerX = rect.width / 2;
      const centerY = rect.height / 2;
      const rotateX = ((y - centerY) / centerY) * -5;
      const rotateY = ((x - centerX) / centerX) * 5;
      // @ts-ignore
      card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`;
    });
    card.addEventListener("mouseleave", () => {
      // @ts-ignore
      card.style.transform =
        "perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)";
    });
  });
</script>
